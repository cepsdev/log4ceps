/*
Copyright 2015, Krauss-Maffei-Wegmann GmbH & Co. KG.
All rights reserved.

Description:
	General events, states and record format.
*/

val Km = 1000.0*meter;
val Hour = 3600.0*second;

kind Systemstate;
kind Event;
kind Record;

events{
 Step{
  description{"Fired whenever the main loop computes a new set of active states.";};
 }; 
};


state{
 id{Current_states;};
 value{Dynamic_bitset{size{32;};};};
};

state{
 id{Current_event;};
 value{0;};
};

state{
 id{Synch_counter;};
 value{0;};
};


record{
 id{Statemachine_log_entry;};
 
 Current_event;
 Current_states;
 Synch_counter;
};

test{
 Record Statemachine_log_entry;
 Systemstate Current_states;
 logfile{record{Statemachine_log_entry;};path{"test.bin";};size{1024;};};
 Current_states.set(1);
 Step;
 Current_states.set(2);
 Step;
 Current_states.set(3); 
 Step;
 Current_states.reset(3); 
 Step; 
 log_print(logger_Statemachine_log_entry);
};


